<div class="nav-icon nav-shop-bag">
  <div class="dropdown show nav-dropdown">
    <button class="btn dropdown-toggle m-0" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false">
      <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 -3 18 47">
        <defs>
          <style>
            .cls-1 {
              fill: rgb(58, 58, 58);
            }

            .cls-2 {
              fill: #fff;
            }
          </style>
        </defs>
        <title>image_large_1</title>
        <g id="bag_large">
          <rect id="boundingbox" class="cls-1" width="0" height="0" />
          <path id="bag" class="cls-2"
            d="M14.5,14H12.712a4.227,4.227,0,0,0-8.424,0H2.5A2.5,2.5,0,0,0,0,16.5v11A2.5,2.5,0,0,0,2.5,30h12A2.5,2.5,0,0,0,17,27.5v-11A2.5,2.5,0,0,0,14.5,14Zm-6-2.875A3.243,3.243,0,0,1,11.712,14H5.288A3.243,3.243,0,0,1,8.5,11.125ZM16,27.5A1.5,1.5,0,0,1,14.5,29H2.5A1.5,1.5,0,0,1,1,27.5v-11A1.5,1.5,0,0,1,2.5,15h12A1.5,1.5,0,0,1,16,16.5Z" />
        </g>
      </svg>
    </button>
    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink"
      style="width: 280px; border-radius: 20px">

      {{#if user}}
      <div class="list-group-item border-0">
        {{#if user.CartItems}}
        {{#each user.CartItems}}
        <div class="row mx-auto">
          <div class="col-4 d-flex align-items-center">
            <img src="{{this.Product.image}}" class="card-img" alt="">
          </div>
          <div class="col-8 d-flex align-items-center">
            <div class="card-body">
              <h5 class="card-title" style="font-size: 14px;">{{this.Product.name}}</h5>
            </div>
          </div>
        </div>
        {{/each}}
        <a class="dropdown-item mt-3" href="/cart">
          <button class="btn nav-post-order-btn w-100">結帳</button>
        </a>
        {{else}}
        <small class="d-flex justify-content-center">購物袋中沒有任何商品。</small>
        {{/if}}
      </div>
      {{else}}
      <div class="list-group-item border-0">
        {{#if cart.items}}
        {{#each cart.items}}
        <div class="row mx-auto">
          <div class="col-4 d-flex align-items-center">
            <img src="{{this.image}}" class="card-img" alt="">
          </div>
          <div class="col-8 d-flex align-items-center">
            <div class="card-body">
              <h5 class="card-title" style="font-size: 14px;">{{this.name}}</h5>
            </div>
          </div>
        </div>
        {{/each}}
        <a class="dropdown-item mt-3" href="/cart">
          <button class="btn nav-post-order-btn w-100">結帳</button>
        </a>
        {{else}}
        <small class="d-flex justify-content-center">購物袋中沒有任何商品。</small>
        {{/if}}
      </div>
      {{/if}}



      <div class="dropdown-divider"></div>

      <a class="dropdown-item d-flex justify-content-center align-items-center" href="/cart">
        <img src="https://i.imgur.com/ZlFAWRi.png" alt="">
        <div class="nav-cart-item">購物袋</div>
      </a>

      <div class="dropdown-divider"></div>

      <a class="dropdown-item d-flex justify-content-center align-items-center" href="/orders">
        <img src="https://i.imgur.com/hGqFqwU.png" alt="">
        <div class="nav-cart-item">訂單</div>
      </a>

      <div class="dropdown-divider"></div>

      {{#if user}}
      <a class="dropdown-item d-flex flex-column align-items-center justify-content-center" style="border-radius: 20px;"
        href="/logout">
        <div class="d-flex align-items-center">
          <img src="https://i.imgur.com/Hxg8bfx.png" alt="">
          <div class="nav-cart-item">登出</div>
        </div>
        <small class="nav-cart-item">{{ user.email }}</small>
      </a>
      {{else}}
      <a class="dropdown-item d-flex justify-content-center align-items-center" style="border-radius: 20px;"
        href="/login">
        <img src="https://i.imgur.com/Hxg8bfx.png" alt="">
        <div class="nav-cart-item">登入</div>

      </a>
      {{/if}}
    </div>
  </div>
</div>